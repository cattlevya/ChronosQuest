<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Materi - Steampunk LMS</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Lobster&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/materi.css">
</head>

<body>
    <a href="#" class="credit" title="Steampunk LMS"></a>

    <div id="hook">
        <div class="chain"></div>
    </div>
    <div id="weight">
        <div class="main"></div>
        <div class="chain"></div>
    </div>
    <div id="weightshadow">
        <div class="chain"></div>
    </div>

    <div id="largecog">
        <img id="cog3a"
            src="https://25.media.tumblr.com/ac99be8daa6ac86d43358687f67a46ab/tumblr_msnppbHo4M1shpaqho5_250.png"
            alt="gear" />
        <img id="cog3b"
            src="https://static.tumblr.com/7c0eea9ec0cad8c8f7aeb51e2c88e08f/ar04e8q/fMjouz3if/tumblr_static_eg5g33ywancocc8gsgowkg4k8.png"
            alt="gear" />
        <img id="cog4"
            src="https://25.media.tumblr.com/ed12723661695d6c69cc7e3e418b6211/tumblr_msnppbHo4M1shpaqho7_400.png"
            alt="gear" />
    </div>

    <div id="right">
        <div id="mfchain">
            <div id="mfchainleft"></div>
            <div id="mfchainright"></div>
            <div id="mfspin">
                <div class="bottomlayer"></div>
                <div id="mfmiddle"></div>
                <div class="toplayer"></div>
            </div>
            <div id="mfcover"></div>
        </div>
        <div>
            <img id="cog1a"
                src="https://media.tumblr.com/1bd00b3c81506c7cb03b9484edd93187/tumblr_inline_msnq7yD08K1qz4rgp.png"
                alt="gear" />
            <img id="cog1b"
                src="https://media.tumblr.com/25c007882a3b456f3635f58ce58c314b/tumblr_inline_msnq86nxld1qz4rgp.png"
                alt="gear" />
            <img id="cog2a"
                src="https://media.tumblr.com/abad90366ac3164f8b56dfc46b1ba750/tumblr_inline_msnq8cceub1qz4rgp.png"
                alt="gear" />
        </div>

        <div id="side">
            <a href="profile.html" class="avatar">
                <img src="../assets/profile.png" alt="Avatar" />
            </a>
            <div class="description">
                <h1>Menu Navigasi</h1>
                <div class="divider"></div>
                <p>Pilih modul pembelajaran di bawah ini.</p>
                <div class="divider"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="window.location.href='dashboard.html'" class="side-btn">&laquo; Dashboard</button>
                </div>
            </div>
            <div class="buttonlinks">
                <span><a href="dashboard.html" title="Dashboard">I</a></span>
                <span><a href="materi.html" title="Materi">II</a></span>
                <span><a href="quest.html" title="Quest">III</a></span>
                <span><a href="profile.html" title="Profile">IV</a></span>
            </div>
        </div>
    </div>

    <div id="rightshadow">
        <div id="mfschain">
            <div id="mfschainleft"></div>
            <div id="mfschainright"></div>
        </div>
        <img id="sideshadow"
            src="https://25.media.tumblr.com/147c1ffd4f7abb027b7509f1c0d3c4dc/tumblr_msnppbHo4M1shpaqho8_400.png"
            alt="shadow" />
    </div>







    <div id="content">
        <img class="bgtop"
            src="https://24.media.tumblr.com/6bc225bb6516ec88244872b095b464f2/tumblr_msnppbHo4M1shpaqho9_r1_400.png"
            alt="decor" />

        <div id="page-materi" class="page-section">
            <div class="post">
                <div id="frame">
                    <div class="frametop"></div>
                    <div class="frameleft"></div>
                    <div class="frameright"></div>
                    <div class="framebottom"></div>

                    <div class="content-inner">
                        <div class="materi-header-box">
                            <h1 class="main-title">Materi Library</h1>
                        </div>

                        <div class="materials-grid" id="materiList">
                            <p
                                style="grid-column: 1 / -1; text-align: center; color: #333; font-style:italic; padding:20px;">
                                Sedang memuat data materi...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <img class="bgbottom"
            src="https://24.media.tumblr.com/5ac1df84822e5c83122c686964646c1c/tumblr_msnppbHo4M1shpaqho10_r1_400.png"
            alt="decor" />
    </div>

    <script src="../js/layout.js"></script>
    <script>
        async function loadMateriData() {
            try {
                const response = await fetch('../php/materi_data.php');
                const contentType = response.headers.get("content-type");

                if (!contentType || !contentType.includes("application/json")) {
                    // Fallback
                    renderMateri([
                        { title: "HTML & CSS Dasar", description: "Fondasi pembuatan web layout.", category: "Frontend", id: 1 },
                        { title: "JavaScript Logic", description: "Interaktivitas dan logika.", category: "Frontend", id: 2 },
                        { title: "PHP Backend", description: "Pengolahan data server-side.", category: "Backend", id: 3 }
                    ]);
                    return;
                }

                const result = await response.json();
                if (result.success) {
                    renderMateri(result.data.materials);
                } else {
                    document.getElementById('materiList').innerHTML = `<p style="text-align:center;">${result.message}</p>`;
                }
            } catch (error) {
                console.error(error);
            }
        }

        // --- Render Kartu (Struktur HTML disamakan dengan Quest) ---
        function renderMateri(materials) {
            const container = document.getElementById('materiList');
            if (materials.length > 0) {
                container.innerHTML = materials.map(mat => `
                    <div class="mat-card">
                        <div class="mat-inner">
                            <h2 class="mat-title">${mat.title}</h2>
                            <p class="mat-cat">Kategori: ${mat.category}</p>
                            <p class="mat-desc">${mat.description || 'Tidak ada deskripsi.'}</p>
                            
                            <button class="btn-read" onclick="window.location.href='detail_materi.html?id=${mat.id}'">
                                Buka Modul
                            </button>
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p style="text-align:center; grid-column:1/-1;">Belum ada materi.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', loadMateriData);
    </script>
    <script src="../js/navbar.js?v=20251216_bust"></script>
</body>

</html>